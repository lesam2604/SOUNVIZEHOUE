let e=null;async function i(){let t=$("#objectId").val();if(t)try{let{data:a}=await ajax({url:`${API_BASEURL}/scrolling-messages/fetch/${t}`,type:"GET"});e=a}catch({error:a}){await Swal.fire(a.responseJSON.message,"","error"),location="/scrolling-messages"}}function n(){$("#label").html(e.label),$("#content").html(e.content),$("#from").html(e.from),$("#to").html(e.to),$("#time").html(e.time),$("#size").html({small:"Petit",medium:"Moyen",large:"Grand"}[e.size]),$("#color").html({black:"Noir",blue:"Blue",red:"Rouge",yellow:"Jaune",green:"Vert"}[e.color]),$("#show_auth").html(e.show_auth?"Oui":"Non"),$("#show_app").html(e.show_app?"Oui":"Non"),$("#status").html({enabled:'<span class="badge rounded-pill bg-success">Actif</span>',disabled:'<span class="badge rounded-pill bg-secondary">Inactif</span>'}[e.status])}async function s(t){try{if(!(await Swal.fire({title:`Voulez-vous vraiment ${t==="enabled"?"activer":"désactiver"} le message défilant ${e.label}?`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)throw{};swalLoading();let{data:l}=await ajax({url:`${API_BASEURL}/scrolling-messages/change-status/${e.id}`,type:"POST",data:{status:t}});Toast.fire(l.message,"","success"),location.reload()}catch({error:a}){Swal.fire(a.responseJSON.message,"","error")}}async function o(){try{if(!(await Swal.fire({title:`Voulez-vous vraiment supprimer le message défilant ${e.label}?`,text:"Cette opération est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)throw{};swalLoading();let{data:a}=await ajax({url:`${API_BASEURL}/scrolling-messages/delete/${e.id}`,type:"POST"});Toast.fire(a.message,"","success"),location="/scrolling-messages"}catch({error:t}){Swal.fire(t.responseJSON.message,"","error")}}window.render=async function(){await i(),setTitle(`Détails du message défilant ${e.label}`),n(),$("#edit").click(function(t){location=`/scrolling-messages/${e.id}/edit`}),$("#enable").click(function(t){s("enabled")}),$("#disable").click(function(t){s("disabled")}),$("#delete").click(function(t){o()}),e.status!=="disabled"&&$("#enable").hide(),e.status!=="enabled"&&$("#disable").hide()};
