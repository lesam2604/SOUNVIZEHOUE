let o=null;function d(){o=$("#table").DataTable({processing:!0,serverSide:!0,columns:[{data:"__no__",name:"id"},{data:"card_id",name:"card_id",render:(e,r,t)=>`<a href="/cards/${t.id}">${e}</a>`},{data:"category",name:"category"},{data:"sold",name:"sold"}],order:[0,"desc"],ajax:{url:`${API_BASEURL}/cards/list`,type:"POST",dataType:"json",error:e=>{Swal.fire(e.responseJSON.message,"","error")}},pageLength:25,autoWidth:!1}),$("#table").wrap('<div style="overflow-x: auto;"></div>')}window.render=function(){d(),$("#showModalDeleteRange").click(function(){$("#cardIdFrom, #cardIdTo").val(""),$("#modalDeleteRange").modal("show")}),$("#cardIdFrom, #cardIdTo").on("input",function(){let e=$(this).val().replace(/\D/g,"").substring(0,10);$(this).val(e)}),$("#deleteRange").click(async function(){const e=$("#cardIdFrom").val(),r=$("#cardIdTo").val();if((await Swal.fire({title:`Voulez-vous vraiment supprimer les cartes de ${e} à ${r} ?`,text:"Cette opération est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)try{swalLoading();let{data:a}=await ajax({url:`${API_BASEURL}/cards/delete-range`,type:"POST",data:{card_id_from:e,card_id_to:r}});Toast.fire(a.message,"","success"),o.draw()}catch({error:a}){console.log(a),Swal.fire(a.responseJSON.message,"","error")}})};
