let t=null;async function s(){let e=$("#objectId").val();if(e)try{let{data:a}=await ajax({url:`${API_BASEURL}/broadcast-messages/fetch/${e}`,type:"GET"});t=a}catch({error:a}){await Swal.fire(a.responseJSON.message,"","error"),location="/broadcast-messages"}}function r(){$("#label").html(t.label),$("#content").html(`
    <div class="ql-container">
      <div class="ql-editor">${t.content}</div>
    </div>
  `),$("#group").html({all:"Tous les utilisateurs",collab:"Collaborateurs uniquement",partner:"Partenaires uniquement"}[t.group])}async function i(){try{if(!(await Swal.fire({title:`Voulez-vous vraiment supprimer le message de diffusion ${t.label}?`,text:"Cette op√©ration est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)throw{};swalLoading();let{data:a}=await ajax({url:`${API_BASEURL}/broadcast-messages/delete/${t.id}`,type:"POST"});Toast.fire(a.message,"","success"),location="/broadcast-messages"}catch({error:e}){Swal.fire(e.responseJSON.message,"","error")}}async function l(){try{await ajax({url:`${API_BASEURL}/broadcast-messages/mark-as-seen/${t.id}`,type:"POST"})}catch({error:e}){Swal.fire(e.responseJSON.message,"","error")}}window.render=async function(){await s(),setTitle(`Details du message de diffusion ${t.label}`),r(),$("#edit").click(function(e){location=`/broadcast-messages/${t.id}/edit`}),$("#delete").click(function(e){i()}),l()};
