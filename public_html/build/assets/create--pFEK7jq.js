let a=null;async function r(){let e=$("#objectId").val();if(e)try{let{data:t}=await ajax({url:`${API_BASEURL}/inv-categories/fetch/${e}`,type:"GET"});a=t}catch({error:t}){await Swal.fire(t.responseJSON.message,"","error"),location="/inv-categories"}}function o(){$("#name").val(""),$(".is-invalid").removeClass("is-invalid")}function s(){$("#name").val(a.name)}async function i(){swalLoading();try{let{data:e}=await ajax({url:`${API_BASEURL}/inv-categories/store`,type:"POST",data:{name:$("#name").val()}});Toast.fire(e.message,"","success"),o()}catch({error:e}){console.log(e),e.responseJSON.errors&&Swal.close(),showErrors(e.responseJSON)}}async function n(){swalLoading();try{let{data:e}=await ajax({url:`${API_BASEURL}/inv-categories/update/${a.id}`,type:"POST",data:{name:$("#name").val()}});Toast.fire(e.message,"","success"),location=`/inv-categories/${a.id}`}catch({error:e}){console.log(e),e.responseJSON.errors&&Swal.close(),showErrors(e.responseJSON)}}window.render=async function(){await r(),setTitle(a?`Édition de la catégorie de produits ${a.code}`:"Nouvelle catégorie de produits"),a?s():o(),$("#form").submit(function(e){e.preventDefault(),a?n():i()})};
