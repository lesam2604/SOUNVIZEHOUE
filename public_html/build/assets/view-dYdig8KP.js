let t=null;async function o(){let e=$("#objectId").val();if(e)try{let{data:i}=await ajax({url:`${API_BASEURL}/inv-products/fetch/${e}`,type:"GET"});t=i}catch({error:i}){await Swal.fire(i.responseJSON.message,"","error"),location="/inv-products"}}function c(){$("#code").html(t.code),$("#name").html(t.name),$("#unitPrice").html(formatAmount(t.unit_price)),$("#category").html(t.category.name),$("#stockQuantity").html(t.stock_quantity),$("#stockQuantityMin").html(t.stock_quantity_min),$("#picture").html(t.picture?`<img src="${getUploadUrl(t.picture)}" width="360">`:"")}async function a(){try{if(!(await Swal.fire({title:`Voulez-vous vraiment supprimer le produit ${t.code}?`,text:"Cette op√©ration est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)throw{};swalLoading();let{data:i}=await ajax({url:`${API_BASEURL}/inv-products/delete/${t.id}`,type:"POST"});Toast.fire(i.message,"","success"),location="/inv-products"}catch({error:e}){Swal.fire(e.responseJSON.message,"","error")}}window.render=async function(){await o(),setTitle(`Details du produit ${t.code}`),c(),$("#edit").click(function(e){location=`/inv-products/${t.id}/edit`}),$("#delete").click(function(e){a()})};
