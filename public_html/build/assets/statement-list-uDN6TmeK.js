let a=null;function n(){a=$("#table").DataTable({processing:!0,serverSide:!0,columns:[{data:"created_at",name:"created_at"},{data:"partner",name:"partner"},{data:"type",name:"type"},{data:"amount",name:"amount",render:(e,t,r)=>formatAmount(e)},{data:"balance",name:"balance",render:(e,t,r)=>formatAmount(e)}],order:[0,"desc"],ajax:{url:`${API_BASEURL}/partners/statement-list`,type:"POST",dataType:"json",data:e=>{e.from_date=$("#fromDate").val(),e.to_date=$("#toDate").val()},error:e=>{Swal.fire(e.responseJSON.message,"","error")}},pageLength:25,autoWidth:!1,deferLoading:0}),$("#table").wrap('<div style="overflow-x: auto;"></div>')}async function o(){setTitle("Relevé des opérations"),$("#exportExcel").click(function(e){e.preventDefault(),downloadFile(`${API_BASEURL}/partners/export-excel-statement`,"GET",{from_date:$("#fromDate").val(),to_date:$("#toDate").val()})}),$("#exportPdf").click(async function(e){e.preventDefault(),swalLoading(),await downloadFile(`${API_BASEURL}/partners/export-pdf-statement`,"GET",{from_date:$("#fromDate").val(),to_date:$("#toDate").val()}),Swal.close()}),$("#fromDate, #toDate").change(function(){a.draw()}),$("#fromDate").change()}window.render=async function(){n(),await o()};
