let r=null;async function n(){let a=$("#objectId").val();if(a)try{let{data:e}=await ajax({url:`${API_BASEURL}/balance-adjustments/fetch/${a}`,type:"GET"});r=e}catch({error:e}){await Swal.fire(e.responseJSON.message,"","error"),location="/balance-adjustments"}}function t(){$("#partnerId").val("").change(),$("#amountToWithdraw").val("0"),$("#reason").val(""),$(".is-invalid").removeClass("is-invalid")}async function o(){swalLoading();try{let{data:a}=await ajax({url:`${API_BASEURL}/balance-adjustments/store`,type:"POST",data:{partner_id:$("#partnerId").val(),amount_to_withdraw:$("#amountToWithdraw").val(),reason:$("#reason").val()}});Toast.fire(a.message,"","success"),t()}catch({error:a}){console.log(a),a.responseJSON.errors&&Swal.close(),showErrors(a.responseJSON,{partner_id:"#partnerId",amount_to_withdraw:"#amountToWithdraw",reason:"#reason"})}}window.render=async function(){await n(),populatePartners("#partnerId"),setTitle("Nouvel ajustement de solde"),t(),$("#form").submit(function(a){a.preventDefault(),o()})};
