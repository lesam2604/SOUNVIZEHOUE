let t=null;function d(){t=$("#table").DataTable({processing:!0,serverSide:!0,columns:[{data:"__no__",name:"id"},{data:"decoder_number",name:"decoder_number",render:(e,o,a)=>`<a href="/decoders/${a.id}">${e}</a>`},{data:"sold",name:"sold"}],order:[0,"desc"],ajax:{url:`${API_BASEURL}/decoders/list`,type:"POST",dataType:"json",error:e=>{Swal.fire(e.responseJSON.message,"","error")}},pageLength:25,autoWidth:!1}),$("#table").wrap('<div style="overflow-x: auto;"></div>')}window.render=function(){d(),$("#showModalDeleteRange").click(function(){$("#decoderNumberFrom, #decoderNumberTo").val(""),$("#modalDeleteRange").modal("show")}),$("#decoderNumberFrom, #decoderNumberTo").on("input",function(){let e=$(this).val().replace(/\D/g,"").substring(0,14);$(this).val(e)}),$("#deleteRange").click(async function(){const e=$("#decoderNumberFrom").val(),o=$("#decoderNumberTo").val();if((await Swal.fire({title:`Voulez-vous vraiment supprimer les décodeurs de ${e} à ${o} ?`,text:"Cette opération est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)try{swalLoading();let{data:r}=await ajax({url:`${API_BASEURL}/decoders/delete-range`,type:"POST",data:{decoder_number_from:e,decoder_number_to:o}});Toast.fire(r.message,"","success"),t.draw()}catch({error:r}){console.log(r),Swal.fire(r.responseJSON.message,"","error")}})};
