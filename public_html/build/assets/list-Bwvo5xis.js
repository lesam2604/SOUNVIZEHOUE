let r=null;async function o(){try{if(!(await Swal.fire({title:"Voulez-vous vraiment effectuer un retrait de toutes vos commissions?",text:"Cette opÃ©ration est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)throw{};swalLoading();let{data:a}=await ajax({url:`${API_BASEURL}/withdrawals/send-otp-code`,type:"POST"});Toast.fire(a.message,"","success"),$("#otpCode").val(""),$("#modalOtp").modal("show")}catch({error:e}){Swal.fire(e.responseJSON.message,"","error")}}async function n(){swalLoading();try{let{data:e}=await ajax({url:`${API_BASEURL}/withdrawals/store`,type:"POST",data:{otp_code:$("#otpCode").val()}});Toast.fire(e.message,"","success"),$("#modalOtp").modal("hide"),r.draw(!1)}catch({error:e}){Swal.fire(e.responseJSON.message,"","error")}}function s(){r=$("#table").DataTable({processing:!0,serverSide:!0,columns:[{data:"__no__",name:"id"},{data:"code",name:"code",render:(e,a,t)=>`<a href="/withdrawals/${t.id}">${e}</a>`},{data:"amount",name:"amount",render:(e,a,t)=>formatAmount(e)},{data:"created_at",name:"created_at"},{data:"partner",name:"partner"},{data:"partner_code",name:"partner_code"}],order:[0,"desc"],ajax:{url:`${API_BASEURL}/withdrawals/list`,type:"POST",dataType:"json",data:e=>{},error:e=>{Swal.fire(e.responseJSON.message,"","error")}},pageLength:25,autoWidth:!1}),$("#table").wrap('<div style="overflow-x: auto;"></div>')}window.render=function(){s(),$("#withdraw").click(function(e){o()}),$("#confirmOtp").click(function(e){n()})};
