function r(){$("#firstName").val(""),$("#lastName").val(""),$("#phoneNumber").val(""),$("#email").val(""),$("#confirmEmail").val(""),$("#picture").val(""),$("#idCardNumber").val(""),$("#idCardPicture").val(""),$("#address").val(""),$(".update-image-helper").hide(),$(".is-invalid").removeClass("is-invalid")}async function i(){swalLoading();let e=new FormData;e.append("first_name",$("#firstName").val()),e.append("last_name",$("#lastName").val()),e.append("phone_number",$("#phoneNumber").val()),e.append("email",$("#email").val()),e.append("email_confirmation",$("#confirmEmail").val()),e.append("picture",$("#picture")[0].files[0]??""),e.append("idcard_number",$("#idCardNumber").val()),e.append("idcard_picture",$("#idCardPicture")[0].files[0]??""),e.append("address",$("#address").val());try{let{data:a}=await ajax({url:`${API_BASEURL}/partners/store`,type:"POST",contentType:!1,processData:!1,data:e});Toast.fire(a.message,"","success"),r()}catch({error:a}){console.log(a),a.responseJSON.errors&&Swal.close(),showErrors(a.responseJSON,{first_name:"#firstName",last_name:"#lastName",phone_number:"#phoneNumber",email:"#email",email_confirmation:"#confirmEmail",picture:"#picture",idcard_number:"#idCardNumber",idcard_picture:"#idCardPicture",address:"#address"})}}window.render=async function(){USER.hasRole("reviewer")?setTitle("Nouveau partenaire"):setTitle("Nouvelle boutique"),r(),$("#form").submit(function(e){e.preventDefault(),i()})};
