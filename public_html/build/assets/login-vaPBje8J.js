async function s(){let{data:a}=await ajax({url:`${API_BASEURL}/scrolling-messages/fetch-visibles`,type:"GET"});a.forEach(e=>{renderScrollingMessageHtml(e).appendTo("#containerScrollingMessages")}),$(":root").css("--marquee-init-x",$("#containerScrollingMessages").width()+"px")}window.render=async function(){await s(),$("#form").submit(async function(a){a.preventDefault(),$("#form button").html('Connexion en cours <i class="fas fa-spinner fa-pulse"></i>').prop("disabled",!0);try{let{data:e}=await ajax({url:`${API_BASEURL}/login`,type:"POST",data:{email:$("#email").val(),password:$("#password").val()}});localStorage.setItem("token",e.authorization.token);for(const o of["admin","collab","partner"])if(e.user.roles.indexOf(o)!==-1){setCookie("user-type",o);break}location.href="/dashboard"}catch({error:e}){$("#form button").html("Se connecter").prop("disabled",!1),console.log(e),showErrors(e.responseJSON)}})};
