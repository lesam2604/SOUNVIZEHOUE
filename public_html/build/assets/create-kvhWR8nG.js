function r(){$("#partnerId").val("").change(),clearCardAddingTypes(),$(".is-invalid").removeClass("is-invalid")}async function a(){swalLoading();try{let{data:e}=await ajax({url:`${API_BASEURL}/card-orders/store`,type:"POST",data:fillCardAddingTypes({client_type:$("#clientType").val(),partner_id:$("#partnerId").val(),extra_client_id:$("#extraClientId").val()})});Toast.fire(e.message,"","success"),r()}catch({error:e}){console.log(e),e.responseJSON.errors&&Swal.close(),showErrors(e.responseJSON,fillCardAddingErrorFields({client_type:"#clientType",partner_id:"#partnerId",extra_client_id:"#extraClientId"}))}}window.render=async function(){$("#clientType").change(function(){switch($(this).val()){case"partner":$("#partnerId").parent().show(),$("#extraClientId").parent().hide();break;case"extra_client":$("#partnerId").parent().hide(),$("#extraClientId").parent().show();break}}).change(),populatePartners("#partnerId"),populateExtraClients("#extraClientId"),initCardAddingTypes(),setTitle("Nouvelle commande de carte"),r(),$("#form").submit(function(e){e.preventDefault(),a()})};
