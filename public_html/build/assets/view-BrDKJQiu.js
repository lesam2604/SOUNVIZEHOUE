let e=null;async function a(){let r=$("#objectId").val();if(r)try{let{data:t}=await ajax({url:`${API_BASEURL}/decoders/fetch/${r}`,type:"GET"});e=t}catch({error:t}){await Swal.fire(t.responseJSON.message,"","error"),location="/decoders"}}function n(){$("#decoderNumber").html(e.decoder_number),$("#sold").html(e.decoder_order_id===null?"Non":"Oui");const r=!!e.order.partner;$("#codeClient").html(r?`<a href="/partners/${e.order.partner_id}">${e.order.partner.user.code}</a>`:`<a href="/extra-clients/${e.order.extra_client_id}">${e.order.extra_client.code}</a>`),$("#lastName").html(r?e.order.partner.user.last_name:e.order.extra_client.last_name),$("#firstName").html(r?e.order.partner.user.first_name:e.order.extra_client.first_name),$("#companyName").html(r?e.order.partner.company.name:e.order.extra_client.company_name),$("#tin").html(r?e.order.partner.company.tin:e.order.extra_client.tin),$("#phoneNumber").html(r?e.order.partner.user.phone_number:e.order.extra_client.phone_number)}async function o(){try{if(!(await Swal.fire({title:`Voulez-vous vraiment supprimer le décodeur ${e.decoder_number}?`,text:"Cette opération est irreversible",icon:"question",showCancelButton:!0,confirmButtonText:"Oui",cancelButtonText:"Non"})).isConfirmed)throw{};swalLoading();let{data:t}=await ajax({url:`${API_BASEURL}/decoders/delete/${e.id}`,type:"POST"});Toast.fire(t.message,"","success"),location="/decoders"}catch({error:r}){Swal.fire(r.responseJSON.message,"","error")}}window.render=async function(){await a(),setTitle(`Details du décodeur ${e.decoder_number}`),n(),$("#edit").click(function(r){location=`/decoders/${e.id}/edit`}),$("#delete").click(function(r){o()})};
