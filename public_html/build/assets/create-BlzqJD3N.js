let t=null;async function s(){let a=$("#objectId").val();if(a)try{let{data:e}=await ajax({url:`${API_BASEURL}/card-types/fetch/${a}`,type:"GET"});t=e}catch({error:e}){await Swal.fire(e.responseJSON.message,"","error"),location="/card-types"}}function r(){$("#name").val(""),$(".is-invalid").removeClass("is-invalid")}function o(){$("#name").val(t.name)}async function n(){swalLoading();let a=new FormData;a.append("name",$("#name").val());try{let{data:e}=await ajax({url:`${API_BASEURL}/card-types/store`,type:"POST",contentType:!1,processData:!1,data:a});Toast.fire(e.message,"","success"),r()}catch({error:e}){console.log(e),e.responseJSON.errors&&Swal.close(),showErrors(e.responseJSON,{name:"#name"})}}async function c(){swalLoading();let a=new FormData;a.append("name",$("#name").val());try{let{data:e}=await ajax({url:`${API_BASEURL}/card-types/update/${t.id}`,type:"POST",contentType:!1,processData:!1,data:a});Toast.fire(e.message,"","success"),location=`/card-types/${t.id}`}catch({error:e}){console.log(e),e.responseJSON.errors&&Swal.close(),showErrors(e.responseJSON,{name:"#name"})}}window.render=async function(){await s(),setTitle(t?`Ã‰dition du type de carte ${t.name}`:"Nouveau type de carte"),t?o():r(),$("#form").submit(function(a){a.preventDefault(),t?c():n()})};
