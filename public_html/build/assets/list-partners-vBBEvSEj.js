let e=null;function t(){e=$("#table").DataTable({processing:!0,serverSide:!0,columns:[{data:"__no__",name:"id"},{data:"code",name:"code"},{data:"name",name:"name"},{data:"commission",name:"commission",render:(a,n,o)=>formatAmount(a)},{data:"reviewed_at",name:"reviewed_at"},{data:"partner",name:"partner"},{data:"partner_code",name:"partner_code"}],order:[4,"desc"],ajax:{url:`${API_BASEURL}/commissions/list-partners`,type:"POST",dataType:"json",error:a=>{Swal.fire(a.responseJSON.message,"","error")},data:a=>{a.partner_id=$("#partnerId").val(),a.from_date=$("#fromDate").val(),a.to_date=$("#toDate").val()}},pageLength:25,autoWidth:!1,deferLoading:0}),$("#table").wrap('<div style="overflow-x: auto;"></div>')}async function r(){let{data:a}=await ajax({url:`${API_BASEURL}/commissions/total-partners`,type:"GET",data:{partner_id:$("#partnerId").val(),from_date:$("#fromDate").val(),to_date:$("#toDate").val()}});$("#total").text(parseInt(a).toLocaleString("fr-FR"))}window.render=function(){t(),$("#partnerId, #fromDate, #toDate").change(function(){r(),e.draw()}),$("#partnerId").change(),USER.hasRole("partner")?$("#partnerId").parent().removeClass("d-flex").addClass("d-none"):populatePartners("#partnerId")};
